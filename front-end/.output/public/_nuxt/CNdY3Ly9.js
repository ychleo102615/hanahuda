import{a4 as T,d as I,L as M,M as $,N as C,k as p,y as s,z as n,A as e,a5 as b,B as l,R as r,V as x,P as k,K as w,r as B,J as E,S as R,C as P,X as j,D as z,Y as V,W as O,Q as Y,I as K,_ as F}from"./BKahYXLk.js";function de(t){try{return T.resolve(t)}catch(a){throw a.name==="DependencyNotFoundError"&&console.error(`[useDependency] 依賴未註冊: ${t.toString()}
請確認此依賴已在 registry.ts 中註冊。
當前遊戲模式: ${sessionStorage.getItem("gameMode")||"unknown"}`),a}}function ue(t){try{return T.resolve(t)}catch(a){if(a.name==="DependencyNotFoundError")return null;throw a}}const G={class:"h-full bg-gray-800 text-white px-4 py-2 flex items-center justify-between"},W={class:"flex items-center gap-4"},X={key:0,class:"text-center"},Z={class:"text-xl font-bold"},H={key:1,"data-testid":"lobby-title",class:"text-xl font-bold"},J={class:"flex flex-col items-center"},Q={class:"text-xs text-gray-400"},U={class:"flex items-center gap-4"},q={class:"text-center"},ee={class:"text-xl font-bold"},te=I({__name:"TopInfoBar",props:{variant:{},title:{default:"Game Lobby"}},emits:["menuClick"],setup(t,{emit:a}){const y=a,v=M(),c=$(),{myScore:g,opponentScore:m,isMyTurn:f,deckRemaining:d}=C(v),{connectionStatus:i,actionTimeoutRemaining:o}=C(c),_=p(()=>{switch(i.value){case"connected":return"Connected";case"connecting":return"Connecting...";case"disconnected":return"Disconnected";default:return""}}),N=p(()=>{switch(i.value){case"connected":return"text-green-400";case"connecting":return"text-yellow-400";case"disconnected":return"text-red-400";default:return""}}),A=p(()=>f.value?"Your Turn":"Opponent's Turn"),D=p(()=>o.value!==null&&o.value<=5?"text-red-500":"text-white"),L=()=>{y("menuClick")};return(h,u)=>(n(),s("div",G,[e("div",W,[b(h.$slots,"left",{},()=>[t.variant==="game"?(n(),s("div",X,[u[0]||(u[0]=e("div",{class:"text-xs text-gray-400"},"Opponent",-1)),e("div",Z,l(r(m)),1)])):(n(),s("h1",H,l(t.title),1))])]),e("div",J,[b(h.$slots,"center",{},()=>[t.variant==="game"?(n(),s(k,{key:0},[e("div",{class:w(["text-sm font-medium",{"text-yellow-400":r(f)}])},l(A.value),3),r(o)!==null?(n(),s("div",{key:0,class:w(["text-xl font-bold",D.value])},l(r(o)),3)):x("",!0),e("div",Q," Deck: "+l(r(d)),1)],64)):x("",!0)])]),e("div",U,[b(h.$slots,"right",{},()=>[t.variant==="game"?(n(),s(k,{key:0},[e("div",q,[u[1]||(u[1]=e("div",{class:"text-xs text-gray-400"},"You",-1)),e("div",ee,l(r(g)),1)]),e("div",{class:w(["text-xs",N.value])},l(_.value),3)],64)):(n(),s("button",{key:1,"data-testid":"menu-button","aria-label":"Open menu",class:"p-2 rounded-lg hover:bg-white/10 transition-colors",onClick:L},[...u[2]||(u[2]=[e("svg",{class:"h-6 w-6 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])]))])])]))}}),xe=Object.assign(te,{__name:"TopInfoBar"}),S={BASE:0,DROPDOWN:100,STICKY:200,ANIMATION:500,OVERLAY:1e3,MODAL:1100,PANEL:1200,TOAST:1300,TOOLTIP:1400,RECONNECTION:1500},ne={class:"flex-1 overflow-y-auto p-2"},se={class:"space-y-1"},oe=["onClick"],ae={key:0,class:"text-xl"},ie={class:"text-base font-medium text-gray-900"},le={key:0,class:"text-center py-8 text-gray-500"},re=I({__name:"ActionPanel",props:{isOpen:{type:Boolean},items:{}},emits:["close"],setup(t,{emit:a}){const y=t,v=a,c=B(null),g=()=>{c.value&&K(c.value,{initial:{x:320,opacity:0},enter:{x:0,opacity:1,transition:{type:"spring",stiffness:300,damping:30}},leave:{x:320,opacity:0,transition:{duration:200}}})};E(()=>y.isOpen,d=>{d&&c.value&&g()},{immediate:!0});const m=()=>{v("close")},f=d=>{d.onClick()};return(d,i)=>(n(),R(V,{to:"body"},[P(j,{name:"fade"},{default:z(()=>[t.isOpen?(n(),s("div",{key:0,class:"fixed inset-0 flex items-center justify-end",style:O({zIndex:r(S).OVERLAY})},[e("div",{"data-testid":"panel-overlay",class:"absolute inset-0 bg-black/50 transition-opacity",onClick:m}),e("div",{ref_key:"panelRef",ref:c,"data-testid":"action-panel",role:"dialog","aria-label":"Action menu",class:"relative right-0 h-full w-80 bg-white shadow-2xl flex flex-col",style:O({zIndex:r(S).PANEL})},[e("div",{class:"flex items-center justify-between p-4 border-b border-gray-200"},[i[1]||(i[1]=e("h2",{class:"text-lg font-semibold text-gray-900"},"Menu",-1)),e("button",{"data-testid":"close-button","aria-label":"Close menu",class:"p-2 rounded-lg hover:bg-gray-100 transition-colors",onClick:m},[...i[0]||(i[0]=[e("svg",{class:"h-5 w-5 text-gray-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])])]),e("nav",ne,[e("ul",se,[(n(!0),s(k,null,Y(t.items,o=>(n(),s("li",{key:o.id},[e("button",{"data-testid":"menu-item",class:"w-full text-left px-4 py-3 rounded-lg hover:bg-primary-50 transition-colors flex items-center space-x-3",onClick:_=>f(o)},[o.icon?(n(),s("span",ae,l(o.icon),1)):x("",!0),e("span",ie,l(o.label),1)],8,oe)]))),128))]),t.items.length===0?(n(),s("div",le," No options available ")):x("",!0)]),i[2]||(i[2]=e("div",{class:"p-4 border-t border-gray-200 text-xs text-gray-500 text-center"}," Hanafuda Koi-Koi ",-1))],4)],4)):x("",!0)]),_:1})]))}}),me=Object.assign(F(re,[["__scopeId","data-v-78a7b4c7"]]),{__name:"ActionPanel"});export{me as A,xe as T,S as Z,ue as a,de as u};
